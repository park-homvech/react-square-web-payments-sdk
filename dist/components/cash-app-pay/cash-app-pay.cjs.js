"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const P=require("react"),R=require("../../contexts/form/form.cjs.js");function A(e){if(e&&e.__esModule)return e;const n=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const r in e)if(r!=="default"){const s=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:()=>e[r]})}}return n.default=e,Object.freeze(n)}const o=A(P);function _({callbacks:e,id:n="rswps-cash-app-pay",redirectURL:r,referenceId:s,shape:l="round",size:d="medium",values:m="dark",width:y="static",...O}){const[a,j]=o.useState(),{createPaymentRequest:p,payments:f}=R.useForm(),w=o.useMemo(()=>({redirectURL:r||window.location.href,referenceId:s}),[r,s]),b=o.useMemo(()=>{const t={shape:l,size:d,values:m,width:y};return Object.keys(t).reduce((c,i)=>(t[i]!==void 0&&(c[i]=t[i]),c),{})},[l,d,m,y]);if(o.useEffect(()=>{if(!!a)return()=>{a.destroy()}},[a]),o.useEffect(()=>{if(!p)throw new Error("`createPaymentRequest()` is required when using digital wallets");const t=new AbortController,{signal:c}=t;return(async h=>{const g=f?.paymentRequest(p);if(!g)throw new Error("`paymentRequest` is required when using digital wallets");try{const u=await f?.cashAppPay(g,w).then(q=>{if(!h?.aborted)return j(q),q});await u?.attach(`#${n}`,b),h.aborted&&await u?.destroy()}catch(u){console.error("Initializing Cash App Pay failed",u)}})(c),()=>{t.abort()}},[p,b,w,f]),e)for(const t of Object.keys(e))a?.addEventListener(t.toLowerCase(),e[t]);return o.createElement("div",{...O,id:n})}exports.default=_;
//# sourceMappingURL=cash-app-pay.cjs.js.map
